-- note: hrpdeps, hrpeins, hrpjcls, hrpjedsc, hrpf4, prpf4 are all legacy tables so be sure not to delete/recreate
-- so run grails prod schema-export, delete the above create tables then replace the create tables in this file with ddl.sql's hrp*  
-- note change lib name for client per datasource.groovy, be sure to qualify lib for alter table foreign key names

--  also remove prpmst foreign key for hrpreq_prpmst and hrpqitv
--alter table hrpcandi drop foreign key  FK86C03B6FB743CDD8;
--alter table hrixpgle.hrprqitv drop foreign key FK879AD126E9886DDA;

drop table hrixpgle.hrpbcbs;
drop table hrixpgle.hrpbenef;
drop table hrixpgle.hrpbhv;
drop table hrixpgle.hrpbhvrs;
drop table hrixpgle.hrpcafe;
drop table hrixpgle.hrpcandi;
drop table hrixpgle.hrpcdnot;
drop table hrixpgle.hrpcntx;
drop table hrixpgle.hrpcovrd;
--drop table hrixpgle.hrpdeps;
drop table hrixpgle.hrpdoc;
drop table hrixpgle.hrpdrvaci;
drop table hrixpgle.hrpdrvexp;
drop table hrixpgle.hrpdrvlic;
drop table hrixpgle.hrpdrvvio;
drop table hrixpgle.hrpstu;
--drop table hrixpgle.hrpeins;
drop table hrixpgle.hrpemphst;
drop table hrixpgle.hrpenrol;
--drop table hrixpgle.hrpf4;
drop table hrixpgle.hrpghp;
drop table hrixpgle.hrphosp;
drop table hrixpgle.hrpinci;
drop table hrixpgle.hrpinjdtl;
--drop table hrixpgle.hrpjcls;
drop table hrixpgle.hrpjedsc;
drop table hrixpgle.hrpjobd;
drop table hrixpgle.hrpjobd_hrptech;
drop table hrixpgle.hrpjobd_hrptest;
drop table hrixpgle.hrpjobd_hrpysno;
drop table hrixpgle.hrpmedicr;
drop table hrixpgle.hrpokreq;
drop table hrixpgle.hrpothcvg;
drop table hrixpgle.hrpreq;
drop table hrixpgle.hrpreq_prpmst;
drop table hrixpgle.hrpreqcnd;
drop table hrixpgle.hrpreqst;
drop table hrixpgle.hrprqitv;
drop table hrixpgle.hrpscor;
drop table hrixpgle.hrptech;
drop table hrixpgle.hrptest;
drop table hrixpgle.hrpvolins;
drop table hrixpgle.hrpysno;
drop table hrixpgle.hrpysnoan;
drop table hrixpgle.hrppaf;

create table hrixpgle.hrppaf (id bigint generated by default as identity, version bigint not null, add_bcbs varchar(255), add_department integer, add_eeoc varchar(255), add_full_time char(1), add_grade varchar(255), add_inside_outside varchar(1), add_part_time_hours integer, add_position integer, add_replacing_emp_no integer, add_rs_pension varchar(255), add_savings401k varchar(255), add_sick_leave char(1), add_sub_department integer, add_temp char(1), add_use_vacation char(1), add_vacation_code varchar(255), add_wage_salary numeric(19,2), add_wage_salary_period varchar(255), add_effective timestamp, candidate_id bigint, change_effective timestamp, change_other varchar(255), change_promotion smallint not null, change_transfer smallint not null, comments varchar(255), dept_manager_id integer, dept_manager_approve timestamp, distribution timestamp, drop_effective timestamp, drop_interview timestamp, drop_interview_by_id integer, drop_reason varchar(255), drop_voluntary smallint not null, emp_id integer, from_bcbs varchar(255), from_department integer, from_eeoc varchar(255), from_full_time char(1), from_grade varchar(255), from_inside_outside varchar(1), from_part_time_hours integer, from_position integer, from_replacing_emp_no integer, from_rs_pension varchar(255), from_savings401k varchar(255), from_sick_leave char(1), from_sub_department integer, from_temp char(1), from_use_vacation char(1), from_vacation_code varchar(255), from_wage_salary numeric(19,2), from_wage_salary_period varchar(255), hr_id integer, hr_approve timestamp, name varchar(255), requisition_id bigint, supervisor_id integer, supervisor_approve timestamp, to_bcbs varchar(255), to_department integer, to_eeoc varchar(255), to_full_time char(1), to_grade varchar(255), to_inside_outside varchar(1), to_part_time_hours integer, to_position integer, to_replacing_emp_no integer, to_rs_pension varchar(255), to_savings401k varchar(255), to_sick_leave char(1), to_sub_department integer, to_temp char(1), to_use_vacation char(1), to_vacation_code varchar(255), to_wage_salary numeric(19,2), to_wage_salary_period varchar(255), primary key (id));


create table hrixpgle.hrpbcbs (id bigint generated by default as identity, version bigint not null, enroll_id bigint not null, primary key (id));
create table hrixpgle.hrpbenef (id bigint generated by default as identity, version bigint not null, bebdate timestamp, enroll_id bigint not null, bename varchar(255), berltn varchar(1), besame char(1) not null, beshare numeric(19,2), bessn bigint, betype varchar(5) not null, primary key (id));
create table hrixpgle.hrpbhv (id bigint generated by default as identity, version bigint not null, name varchar(255) not null, primary key (id));
create table hrixpgle.hrpbhvrs (id bigint generated by default as identity, version bigint not null, behavior_id bigint not null, candidate_id bigint not null, note varchar(255), result integer not null, primary key (id));
create table hrixpgle.hrpcafe (id bigint generated by default as identity, version bigint not null, contribution numeric(19,2) not null, ddcBalPr numeric(19,2) not null, ddcDed numeric(19,2) not null, ddcDedPr numeric(19,2) not null, ddcElec numeric(19,2) not null, ddcElecPr numeric(19,2) not null, ddcwaive char(1) not null, fsaActNo varchar(255) not null, fsaBankNam varchar(255) not null, fsaPayAcTp varchar(1), fsaPayMtd varchar(1), fsaRouting varchar(255) not null, urmBalPr numeric(19,2) not null, urmDed numeric(19,2) not null, urmDedPr numeric(19,2) not null, urmElec numeric(19,2) not null, urmElecPr numeric(19,2) not null, urmwaive char(1) not null, primary key (id));
create table hrixpgle.hrpcandi (id bigint generated by default as identity, version bigint not null, able varchar(1), ableexpl varchar(255), able_start timestamp, addr_city varchar(255) not null, addr_line1 varchar(255) not null, addr_line2 varchar(255), addr_state varchar(2) not null, addr_zip varchar(9) not null, altphone varchar(10) not null, created timestamp, driver_awards varchar(255), driver_experience varchar(255), driver_special varchar(255), driver_states_op varchar(255), driver_training varchar(255), email varchar(255) not null, mbrships varchar(255), military_branch varchar(255), military_discharge timestamp, military_rank varchar(255), military_skills varchar(255), military_years integer, name varchar(255) not null, phone_no varchar(10) not null, priwrkfrom timestamp, priwrkto timestamp, empgaps varchar(255), refer varchar(255) not null, relations varchar(255) not null, skills varchar(255), total_years_edu integer not null, updated timestamp, primary key (id));
create table hrixpgle.hrpcdnot (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, date_created timestamp not null, last_updated timestamp not null, note varchar(255) not null, req_status_id varchar(255) not null, primary key (id));
create table hrixpgle.hrpcntx (id bigint generated by default as identity, version bigint not null, addr_city varchar(255) not null, addr_line1 varchar(255) not null, addr_line2 varchar(255), addr_state varchar(2) not null, addr_zip varchar(9) not null, emergency1name varchar(255), emergency1phone1 varchar(255), emergency1phone2 varchar(255), emergency2name varchar(255), emergency2phone1 varchar(255), emergency2phone2 varchar(255), first_name varchar(255) not null, gender varchar(255) not null, last_name varchar(255) not null, marital_status varchar(255) not null, mi varchar(255) not null, no_changes char(1) not null, phone varchar(255) not null, ssn varchar(255) not null, status varchar(255) not null, union_status varchar(255) not null, work_site varchar(255) not null, primary key (id));
create table hrixpgle.hrpcovrd (id bigint generated by default as identity, version bigint not null, birth timestamp not null, enroll_id bigint not null, gender varchar(1) not null, name varchar(255) not null, relation varchar(1) not null, ssn bigint not null, primary key (id));
--create table hrixpgle.hrpdeps (DEEMP integer not null, DESEQ integer not null, DEBIRDTE date not null, DEOINSED date, DESEX varchar(1) not null, DEDPNME varchar(35) not null, DEOTHINS varchar(255) not null, DEOINSNM varchar(30) not null, DEOINSPH varchar(10) not null, DEPOSGR varchar(20) not null, DEDEPREL varchar(1) not null, DESESTR varchar(30) not null, DESEADDR varchar(30) not null, DESCHEMP varchar(30) not null, DESEPHN varchar(10) not null, DESEZIP varchar(9) not null, DEDEPSSN integer not null, primary key (DEEMP, DESEQ));
create table hrixpgle.hrpdoc (id bigint generated by default as identity, version bigint not null, addr_city varchar(255) not null, addr_line1 varchar(255) not null, addr_line2 varchar(255), addr_state varchar(2) not null, addr_zip varchar(9) not null, name varchar(255) not null, phone_no varchar(255), primary key (id));
create table hrixpgle.hrpdrvaci (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, date timestamp, fatalities integer not null, has_mat varchar(255), injuries integer not null, nature varchar(255) not null, primary key (id));
create table hrixpgle.hrpdrvexp (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, frommmyy integer not null, klass varchar(1) not null, miles integer not null, other varchar(255), tommyy integer not null, typ varchar(255), primary key (id));
create table hrixpgle.hrpdrvlic (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, expire timestamp not null, no varchar(255) not null, state varchar(2) not null, type varchar(255) not null, primary key (id));
create table hrixpgle.hrpdrvvio (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, charge varchar(255) not null, date timestamp not null, location varchar(255) not null, penalty varchar(255) not null, primary key (id));
create table hrixpgle.hrpstu (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, degree varchar(255) not null, descr varchar(255) not null, high_orged char(1) not null, study varchar(255) not null, years integer not null, primary key (id));

--create table hrixpgle.hrpeins (DMEMP integer not null, DMLICOV numeric(19,2) not null, DMBBDTE date, DMDTDTE date, DMPHDTE date, DMDDNO integer not null, DMDPTYP varchar(5) not null, DMLISALR numeric(19,2) not null, DMMPTYP varchar(5) not null, DMNSALR numeric(19,2) not null, DMVPTYP varchar(5) not null, DMDPHNE varchar(10) not null, DMDOCTR varchar(35) not null, DMDEDTE date, DMMEDTE date, DMCEDTE date, DMVEDTE date, DMENME varchar(35) not null, DMPHONE varchar(10) not null, DMBEDTE date, DMGRPNO varchar(15) not null, DMJCLSS varchar(5) not null, DMDTLOC varchar(20) not null, DMMDNO integer not null, DMLDNO integer not null, DMBCVTYP varchar(1) not null, DMDCVTYP varchar(1) not null, DMMCVTYP varchar(1) not null, DMCCVTYP varchar(1) not null, DMVCVTYP varchar(1) not null, DMVDNO integer not null, primary key (DMEMP));
create table hrixpgle.hrpemphst (id bigint generated by default as identity, version bigint not null, addr_city varchar(255) not null, addr_line1 varchar(255) not null, addr_line2 varchar(255), addr_state varchar(2) not null, addr_zip varchar(9) not null, business varchar(255) not null, candidate_id bigint not null, company varchar(255) not null, contact char(1) not null, contact_phone varchar(10), duties varchar(255) not null, ending numeric(19,2) not null, frommmyy integer not null, position varchar(255) not null, supervisor varchar(255) not null, tommyy integer not null, why_left varchar(255) not null, why_no_contact varchar(255), years integer not null, primary key (id));
create table hrixpgle.hrpenrol (id bigint generated by default as identity, version bigint not null, beneficiaries_set char(1) not null, cafeteria_id bigint, contact_id bigint, contact_info_set char(1) not null, date_created timestamp, election varchar(1), employee_id integer not null, fsa_set char(1) not null, health_plan_set char(1) not null, last_updated timestamp, mdv_coverage_prior varchar(255), plan_election_prior varchar(255), sign timestamp, voluntary_ins_set char(1) not null, waive char(1) not null, primary key (id));
--create table hrixpgle.hrpf4 (F4FLD varchar(10) not null, F4VALU varchar(15) not null, F4DESC varchar(45) not null, primary key (F4FLD, F4VALU));
create table hrixpgle.hrpghp (id bigint generated by default as identity, version bigint not null, enroll_id bigint not null, primary key (id));
create table hrixpgle.hrphosp (id bigint generated by default as identity, version bigint not null, addr_city varchar(255) not null, addr_line1 varchar(255) not null, addr_line2 varchar(255), addr_state varchar(2) not null, addr_zip varchar(9) not null, name varchar(40) not null, phone_no varchar(10), primary key (id));
create table hrixpgle.hrpinci (id bigint generated by default as identity, version bigint not null, care_at_clinic char(1) not null, care_emergency_room char(1) not null, care_first_aid char(1) not null, care_outpatient char(1) not null, death timestamp, disability_start timestamp, doctor_id bigint, emp_desc_injury varchar(255) not null, employee_id integer not null, first_away timestamp, hospital_id bigint, hospitalized char(1) not null, incident_date timestamp not null, injury varchar(255) not null, injury_cause varchar(255) not null, injury_source varchar(255) not null, last_away timestamp, last_worked timestamp, med_care_more_required char(1) not null, med_care_on_scene char(1) not null, med_care_required char(1) not null, not_usual_job_id varchar(255), restricted_days integer not null, return_work timestamp, trans_from_care timestamp, trans_to_care timestamp, trans_to_care_type varchar(255) not null, primary key (id));
create table hrixpgle.hrpinjdtl (id bigint generated by default as identity, version bigint not null, body_part varchar(255) not null, body_side varchar(255), incident_id bigint not null, nature varchar(255), primary key (id));
--create table hrixpgle.hrpjcls (JCJCLS varchar(255) not null, JCCOMP varchar(5) not null, JCDEPT varchar(5) not null, JCDIV varchar(5) not null, JCFUNC varchar(60) not null, JCGRD integer not null, JCMINQ varchar(60) not null, JCTYPE varchar(1) not null, JCSUPR varchar(5) not null, JCTTL varchar(40) not null, primary key (JCJCLS));
create table hrixpgle.hrpjedsc (JEJCLS varchar(5) not null, JELNNO integer not null, JEDSC varchar(40) not null, primary key (JEJCLS, JELNNO));
create table hrixpgle.hrpjobd (id bigint generated by default as identity, version bigint not null, ad_external varchar(4096), ad_internal varchar(4096), cdl_required char(1) not null, d_list varchar(255), date_created timestamp not null, email_quiz varchar(4096), job varchar(4096), job_class_id varchar(255) not null, last_updated timestamp not null, phone_quiz varchar(4096), prod_jobd_id bigint, union_job char(1) not null, primary key (id));
create table hrixpgle.hrpjobd_hrptech (job_description_tech_needs_id bigint, tech_need_id bigint);
create table hrixpgle.hrpjobd_hrptest (job_description_tests_id bigint, test_id bigint);
create table hrixpgle.hrpjobd_hrpysno (job_description_yes_no_id bigint, yes_no_id bigint);
create table hrixpgle.hrpmedicr (id bigint generated by default as identity, version bigint not null, effective timestamp not null, enroll_id bigint not null, name varchar(255) not null, policy_no varchar(255) not null, type varchar(1) not null, primary key (id));
create table hrixpgle.hrpokreq (id bigint generated by default as identity, version bigint not null, job_class_id varchar(255) not null, primary key (id));
create table hrixpgle.hrpothcvg (id bigint generated by default as identity, version bigint not null, carrier varchar(255) not null, enroll_id bigint not null, name varchar(255) not null, policy_no varchar(255) not null, primary key (id));
create table hrixpgle.hrpreq (id bigint generated by default as identity, version bigint not null, okhire timestamp, date_created timestamp not null, date_needed timestamp not null, external_posted timestamp, full_time char(1) not null, hire_comment varchar(255), hr_filtered timestamp, internal_posted timestamp, interview timestamp, jobd_id bigint not null, last_updated timestamp not null, misc varchar(255), no_positions integer not null, part_time char(1) not null, picked timestamp, regular char(1) not null, replacing_id integer, status_id varchar(255) not null, super_filtered timestamp, supervisor_id integer not null, temporary char(1) not null, work_site varchar(255) not null, primary key (id));
create table hrixpgle.hrpreq_prpmst (requisition_approved_by_id bigint, employee_payroll_master_id integer);
create table hrixpgle.hrpreqcnd (id bigint generated by default as identity, version bigint not null, bckgndchk char(1) not null, bckgndchkc timestamp, bckgndchki timestamp, candidate_id bigint not null, calltest timestamp, drugtest char(1) not null, drugtestc timestamp, drugtesti timestamp, email_quiz_reply varchar(4096), hr_rank integer not null, interview timestamp, offer_accepted char(1) not null, offer_letter timestamp, offerresp timestamp, onsitetest timestamp, phone_interview timestamp, phone_quiz varchar(4096), phone_quiz_reply varchar(4096), rank integer not null, requisition_id bigint not null, start timestamp, primary key (id));
create table hrixpgle.hrpreqst (code varchar(255) not null, descr varchar(255) not null, next_page_hr varchar(255) not null, next_page_super varchar(255) not null, primary key (code));
create table hrixpgle.hrprqitv (id bigint generated by default as identity, version bigint not null, emp_id integer not null, requisition_id bigint not null, primary key (id));
create table hrixpgle.hrpscor (id bigint generated by default as identity, version bigint not null, candidate_id bigint not null, correct integer not null, created timestamp not null, test_id bigint not null, updated timestamp not null, primary key (id));
create table hrixpgle.hrptech (id bigint generated by default as identity, version bigint not null, description varchar(255) not null, primary key (id));
create table hrixpgle.hrptest (id bigint generated by default as identity, version bigint not null, created timestamp not null, global_ave_correct integer not null, name varchar(255) not null unique, questions integer not null, updated timestamp not null, url varchar(255) not null, primary key (id));
create table hrixpgle.hrpvolins (id bigint generated by default as identity, version bigint not null, benefit varchar(255) not null, benefit_extra varchar(255) not null, costperpay numeric(19,2), costpripay numeric(19,2), persontype varchar(1) not null, enroll_id bigint not null, name varchar(255) not null, not_applicable smallint not null, optiontype varchar(1), waive char(1) not null, primary key (id));
create table hrixpgle.hrpysno (id bigint generated by default as identity, version bigint not null, negative char(1) not null, question varchar(255) not null, short_name varchar(255), primary key (id));
create table hrixpgle.hrpysnoan (id bigint generated by default as identity, version bigint not null, answer char(1) not null, candidate_id bigint not null, yes_no_id bigint not null, primary key (id));


alter table hrixpgle.hrpbcbs add constraint hrixpgle.FK4668DDF8BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpbenef add constraint hrixpgle.FK86B3F586BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpbhvrs add constraint hrixpgle.FK86B5724BA72C9B9C foreign key (behavior_id) references hrixpgle.hrpbhv;
alter table hrixpgle.hrpbhvrs add constraint hrixpgle.FK86B5724B38E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpcdnot add constraint hrixpgle.FK86C199EC31D7B4F3 foreign key (req_status_id) references hrixpgle.hrpreqst;
alter table hrixpgle.hrpcdnot add constraint hrixpgle.FK86C199EC38E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpcovrd add constraint hrixpgle.FK86C6B856BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpdrvaci add constraint hrixpgle.FK53EF320538E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpdrvexp add constraint hrixpgle.FK53EF439B38E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpdrvlic add constraint hrixpgle.FK53EF5C0438E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpdrvvio add constraint hrixpgle.FK53EF819A38E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpstu add constraint hrixpgle.FKTOCANDI foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpemphst add constraint hrixpgle.FK555AF72738E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpenrol add constraint hrixpgle.FK86E263A0D5E2D178 foreign key (contact_id) references hrixpgle.hrpcntx;
alter table hrixpgle.hrpenrol add constraint hrixpgle.FK86E263A020388C78 foreign key (cafeteria_id) references hrixpgle.hrpcafe;
alter table hrixpgle.hrpenrol add constraint hrixpgle.FK86E263A06D767E34 foreign key (employee_id) references hrixpgle.prpmst;
alter table hrixpgle.hrpghp add constraint hrixpgle.FKB7F2F149BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpinci add constraint hrixpgle.FK466C35F139A9BB6E foreign key (hospital_id) references hrixpgle.hrphosp;
alter table hrixpgle.hrpinci add constraint hrixpgle.FK466C35F1C953024E foreign key (doctor_id) references hrixpgle.hrpdoc;
--alter table hrixpgle.hrpinci add constraint hrixpgle.FK466C35F11952BE85 foreign key (not_usual_job_id) references hrixpgle.hrpjcls;
alter table hrixpgle.hrpinci add constraint hrixpgle.FK466C35F16D767E34 foreign key (employee_id) references hrixpgle.prpmst;
alter table hrixpgle.hrpinjdtl add constraint hrixpgle.FK5C39A7FDB4C1146E foreign key (incident_id) references hrixpgle.hrpinci;
--alter table hrixpgle.hrpjobd add constraint hrixpgle.FK466CADED62DD5063 foreign key (job_class_id) references hrixpgle.hrpjcls;
alter table hrixpgle.hrpjobd add constraint hrixpgle.FK466CADED193E8CC foreign key (prod_jobd_id) references hrixpgle.hrpjobd;
alter table hrixpgle.hrpjobd_hrptech add constraint hrixpgle.FK4E310CE5C1093429 foreign key (tech_need_id) references hrixpgle.hrptech;
alter table hrixpgle.hrpjobd_hrptech add constraint hrixpgle.FK4E310CE5FBDAC622 foreign key (job_description_tech_needs_id) references hrixpgle.hrpjobd;
alter table hrixpgle.hrpjobd_hrptest add constraint hrixpgle.FK4E310EE1A90B549C foreign key (test_id) references hrixpgle.hrptest;
alter table hrixpgle.hrpjobd_hrptest add constraint hrixpgle.FK4E310EE1B95B7DBF foreign key (job_description_tests_id) references hrixpgle.hrpjobd;
alter table hrixpgle.hrpjobd_hrpysno add constraint hrixpgle.FK4E3388AA38F56C27 foreign key (yes_no_id) references hrixpgle.hrpysno;
alter table hrixpgle.hrpjobd_hrpysno add constraint hrixpgle.FK4E3388AAB2A12B1D foreign key (job_description_yes_no_id) references hrixpgle.hrpjobd;
alter table hrixpgle.hrpmedicr add constraint hrixpgle.FK628B8D72BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
--alter table hrixpgle.hrpokreq add constraint hrixpgle.FK876DF05C62DD5063 foreign key (job_class_id) references hrixpgle.hrpjcls;
alter table hrixpgle.hrpothcvg add constraint hrixpgle.FK66CA5C77BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpreq add constraint hrixpgle.FKB7F31A389234AF54 foreign key (status_id) references hrixpgle.hrpreqst;
alter table hrixpgle.hrpreq add constraint hrixpgle.FKB7F31A38CA501F3A foreign key (supervisor_id) references hrixpgle.prpmst;
alter table hrixpgle.hrpreq add constraint hrixpgle.FKB7F31A385A173791 foreign key (replacing_id) references hrixpgle.prpmst;
alter table hrixpgle.hrpreq add constraint hrixpgle.FKB7F31A38F2E0E5B4 foreign key (jobd_id) references hrixpgle.hrpjobd;
--alter table hrixpgle.hrpreq_prpmst add constraint hrixpgle.FK525725C2AD922AB8 foreign key (requisition_approved_by_id) references hrixpgle.hrpreq;
--alter table hrixpgle.hrpreq_prpmst add constraint hrixpgle.FK525725C287871C15 foreign key (employee_payroll_master_id) references hrixpgle.prpmst;
alter table hrixpgle.hrpreqcnd add constraint hrixpgle.FK6B199C21B743CDD8 foreign key (requisition_id) references hrixpgle.hrpreq;
alter table hrixpgle.hrpreqcnd add constraint hrixpgle.FK6B199C2138E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrprqitv add constraint hrixpgle.FK879AD126E9886DDA foreign key (emp_id) references hrixpgle.prpmst;
alter table hrixpgle.hrprqitv add constraint hrixpgle.FK879AD126B743CDD8 foreign key (requisition_id) references hrixpgle.hrpreq;
alter table hrixpgle.hrpscor add constraint hrixpgle.FK467099D9A90B549C foreign key (test_id) references hrixpgle.hrptest;
alter table hrixpgle.hrpscor add constraint hrixpgle.FK467099D938E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;
alter table hrixpgle.hrpvolins add constraint hrixpgle.FK7277BA61BFE5247C foreign key (enroll_id) references hrixpgle.hrpenrol;
alter table hrixpgle.hrpysnoan add constraint hrixpgle.FK77CF9FEE38F56C27 foreign key (yes_no_id) references hrixpgle.hrpysno;
alter table hrixpgle.hrpysnoan add constraint hrixpgle.FK77CF9FEE38E21FF8 foreign key (candidate_id) references hrixpgle.hrpcandi;

insert into hrixpgle.hrpjobd (version, ad_external, ad_internal, date_created, job, job_class_id, last_updated, union_job, cdl_required) 
    select 0, '', '', '2011-01-01 00:00:00.000', 'job', jcjcls, '2011-01-01 00:00:00.000', 'N', 'Y' from hrixpgle.hrpjcls;

insert into hrixpgle.hrpreqst (code, descr,                   next_page_hr,                         next_page_super) values
('NEW', 'new applicant requisiton',                           'requisition/show',                   'requisition/show'),
('APPROVE', 'management approval',                            'requisition/show',                   'requisition/show'),
('JOBDMOD', 'job description maintenance - if super changed', 'jobDescription/diff',                'requisition/show'),
('PREPOSTING', 'before I/X posting ',                         'requisition/internalPosting',        'requisition/show'),
('IPOSTED', 'Internal Posting',                               'requisition/externalPosting',        'requisition/show'),
('XPOSTED', 'External posting',                               'candidate/filter',                'requisition/show'),
('HRSELECT', 'HR selects top candidates',                     'candidate/filter',                   'requisition/show'),
('SUPERSELECT', 'Supervisor selects top candidates',          'candidate/filter',                   'candidate/filter'),
('PRECONTACT', 'before calling candidate',                    'candidate/contact',                  'requisition/show'),
('SCHTEST', 'Schedule test dates',                            'candidate/contact',                  'requisition/show'),
('TESTING', 'Testing results maintenance',                    'candidate/testResults',              'requisition/show'),
('PICK', 'select interviewees ',                              'candidate/testCompare',              'candidate/testCompare'),
('SINTD', 'Set interview date',                               'candidate/contact',                  'requisition/show'),
('INTERVIEW', 'interview',                                    'candidate/postInterview',            'requisition/show'),
('BCKGRDCHK', 'background check / reference check',           'candidate/postInterview',            'requisition/show'),
('PRESCREEN', 'Pre-screen email questionaire',                'candidate/prescreen',                'requisition/show'),
('PHONEINTV', 'Phone interview',                              'candidate/phoneIntv',                'requisition/show'),
('OFFERDRUG', 'offer and drug test setup',                    'candidate/postInterview',           'requisition/show'),
('DRUG',       'Drug tests',               'candidate/postInterview',           'requisition/show'),
('OFFER', 'offer letter and wait for response',               'candidate/postInterview',           'requisition/show'),
('SUPERSIGNHIRE', 'supervisor approve and hire',              'requisition/show',                   'requisition/personnelAction'),
('NEWHIRE', 'new hire',                                       'requisition/show',                   'requisition/show');

INSERT INTO hrixpgle.hrpysno (version, question, negative, short_name) VALUES 
(0,'High School Diploma (or GED)','N',NULL),
(0,'College Degree','N',NULL),
(0,'Microsoft Word Proficient','N',NULL),
(0,'Will clean windows','N',NULL),
(0,'Willing to work nights and weekends','N',NULL),
(0,'US Citizen','N',NULL),
(0,'Convicted of a felony ','N',NULL),
(0,'Are you at least eighteen years of age?','N','over18'),
(0,'Can you provide proof of your eligibility to work in the United?','N','us citizen'),
(0,'Do you have a valid Michigan drivers license?','N','michigan driver'),
(0,'Will you generally work overtime if asked?','N','overtime'),
(0,'Are you available and willing to work Saturdays, Sundays and/or holidays or work in excess of eight hours per day?','N','holidays'),
(0,'Are you willing to work after hours call-out duty and on-call assignments, including weekends and holidays, if required?','N','on call'),
(1,'Have you ever been convicted of a crime?','Y','convicted of crime'),
(0,'Do you have any criminal charges pending against you?','Y','criminal charges'),
(0,'Have you ever been convicted of a power (electricity) theft or power diversion?','Y','convicted power diversion'),
(0,'If you are applying for a particular position and have been informed of its requirements, are you able to perform the essential duties of the position with or without accommodation?','N','able'),
(0,'Are you eligible to obtain a CDL A Classification','N','cdlEligible'),
(0,'Do you currently have a CDL A Classification','N','cdl')
;


CREATE FUNCTION datediff ( newer timestamp, older timestamp)
RETURNS integer 
LANGUAGE SQL 
DETERMINISTIC 
CONTAINS SQL 
NO EXTERNAL ACTION
return  days(newer) - days(older); 

